{% extends 'base.html' %}

{% block title %}{{ article.titre }}{% endblock %}

{% block content %}
<h1>{{ article.titre }}</h1>
<p>{{ article.contenu }}</p>
<p>Publié par {{ article.auteur.username }} le {{ article.date_creation }}</p>

<h2>Commentaires</h2>
<ul>
    {% for commentaire in commentaires %}
        <li>{{ commentaire.auteur.username }} : {{ commentaire.contenu }}</li>
    {% empty %}
        <li>Aucun commentaire</li>
    {% endfor %}
</ul>
{% if user.is_authenticated %}
    <a href="{% url 'articles:ajouter_commentaire' article.id %}">Ajouter un commentaire</a>
{% else %}
    <p><a href="{% url 'login' %}">Connectez-vous</a> pour ajouter un commentaire.</p>
{% endif %}
{% if user == article.auteur %}
    <a href="{% url 'articles:modifier' article.id %}">Modifier article</a>
    <a href="{% url 'articles:supprimer' article.id %}">Supprimer article</a>
{% endif %}
{% for commentaire in commentaires %}
    <li>
        {{ commentaire.auteur.username }} : {{ commentaire.contenu }}
        {% if user == commentaire.auteur %}
            - <a href="{% url 'articles:modifier_commentaire' commentaire.id %}">Modifier</a>
            - <a href="{% url 'articles:supprimer_commentaire' commentaire.id %}">Supprimer</a>
        {% endif %}
    </li>
{% endfor %}
<a href="{% url 'articles:liste' %}">Retour à la liste</a>
{% endblock %}
